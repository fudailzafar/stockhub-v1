{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 3, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 49, "column": 0}, "map": {"version":3,"sources":["file:///Users/fudail/Documents/GitHub/stockhub-v1/lib/config/db.js"],"sourcesContent":["import mongoose from \"mongoose\";\n\nexport const ConnectDB = async () => {\n  await mongoose.connect(process.env.MONGODB_URI);\n};\n"],"names":[],"mappings":";;;;AAAA;;AAEO,MAAM,YAAY;IACvB,MAAM,oHAAQ,CAAC,OAAO,CAAC,QAAQ,GAAG,CAAC,WAAW;AAChD","debugId":null}},
    {"offset": {"line": 62, "column": 0}, "map": {"version":3,"sources":["file:///Users/fudail/Documents/GitHub/stockhub-v1/lib/models/BlogModel.js"],"sourcesContent":["import mongoose from \"mongoose\";\n\nconst Schema = new mongoose.Schema({\n  title: {\n    type: String,\n    required: true,\n  },\n  description: {\n    type: String,\n    required: true,\n  },\n  thumbnailDescription: {\n    type: String,\n    required: true,\n  },\n  category: {\n    type: String,\n    required: true,\n  },\n  author: {\n    type: String,\n    required: true,\n  },\n  image: {\n    type: String,\n    required: true,\n  },\n  authorImg: {\n    type: String,\n    required: true,\n  },\n  date: {\n    type: Date,\n    default: Date.now,\n  },\n});\n\nconst BlogModel = mongoose.models.blog || mongoose.model(\"blog\", Schema);\n\nexport default BlogModel;\n"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM,SAAS,IAAI,oHAAQ,CAAC,MAAM,CAAC;IACjC,OAAO;QACL,MAAM;QACN,UAAU;IACZ;IACA,aAAa;QACX,MAAM;QACN,UAAU;IACZ;IACA,sBAAsB;QACpB,MAAM;QACN,UAAU;IACZ;IACA,UAAU;QACR,MAAM;QACN,UAAU;IACZ;IACA,QAAQ;QACN,MAAM;QACN,UAAU;IACZ;IACA,OAAO;QACL,MAAM;QACN,UAAU;IACZ;IACA,WAAW;QACT,MAAM;QACN,UAAU;IACZ;IACA,MAAM;QACJ,MAAM;QACN,SAAS,KAAK,GAAG;IACnB;AACF;AAEA,MAAM,YAAY,oHAAQ,CAAC,MAAM,CAAC,IAAI,IAAI,oHAAQ,CAAC,KAAK,CAAC,QAAQ;uCAElD","debugId":null}},
    {"offset": {"line": 156, "column": 0}, "map": {"version":3,"sources":["file:///Users/fudail/Documents/GitHub/stockhub-v1/lib/config/cloudinary.js"],"sourcesContent":["import { v2 as cloudinary } from \"cloudinary\";\n\ncloudinary.config({\n  cloud_name: process.env.CLOUDINARY_CLOUD_NAME,\n  api_key: process.env.CLOUDINARY_API_KEY,\n  api_secret: process.env.CLOUDINARY_API_SECRET,\n});\n\nexport default cloudinary;\n"],"names":[],"mappings":";;;;AAAA;;AAEA,gJAAU,CAAC,MAAM,CAAC;IAChB,YAAY,QAAQ,GAAG,CAAC,qBAAqB;IAC7C,SAAS,QAAQ,GAAG,CAAC,kBAAkB;IACvC,YAAY,QAAQ,GAAG,CAAC,qBAAqB;AAC/C;uCAEe,gJAAU","debugId":null}},
    {"offset": {"line": 184, "column": 0}, "map": {"version":3,"sources":["file:///Users/fudail/Documents/GitHub/stockhub-v1/app/api/blog/route.js"],"sourcesContent":["import { ConnectDB } from \"@/lib/config/db\";\nimport BlogModel from \"@/lib/models/BlogModel\";\nimport cloudinary from \"@/lib/config/cloudinary\";\n\nconst { NextResponse } = require(\"next/server\");\nconst fs = require(\"fs\");\n\nconst LoadDB = async () => {\n  await ConnectDB();\n};\n\nLoadDB();\n\n// API endpoint to get all blogs\n\nexport async function GET(request) {\n  const blogId = request.nextUrl.searchParams.get(\"id\");\n  if (blogId) {\n    const blog = await BlogModel.findById(blogId);\n    return NextResponse.json(blog);\n  } else {\n    const blogs = await BlogModel.find({});\n    return NextResponse.json({ blogs });\n  }\n}\n\n// API endpoint for Cloudinary to store images\nexport async function handler(req, res) {\n  if (req.method === \"POST\") {\n    try {\n      const { image } = req.body; // Base64 image string or file URL\n\n      const uploadResponse = await cloudinary.uploader.upload(image, {\n        folder: \"uploads\", // Optional: Organize images in a folder\n      });\n\n      res.status(200).json({ url: uploadResponse.secure_url });\n    } catch (error) {\n      res.status(500).json({ error: error.message });\n    }\n  } else {\n    res.status(405).json({ message: \"Method Not Allowed\" });\n  }\n}\n\n// API endpoint for uploading blogs\n\nexport async function POST(request) {\n  try {\n    const formData = await request.formData();\n    const image = formData.get(\"image\");\n\n    if (!image) {\n      return NextResponse.json({ success: false, msg: \"No image uploaded\" });\n    }\n\n    // Convert File to Buffer\n    const arrayBuffer = await image.arrayBuffer();\n    const buffer = Buffer.from(arrayBuffer);\n\n    // Upload image to Cloudinary\n    const uploadResponse = await cloudinary.uploader.upload(\n      `data:${image.type};base64,${buffer.toString(\"base64\")}`,\n      { folder: \"blogs\" }\n    );\n\n    // Blog Data with Cloudinary URL\n    const blogData = {\n      title: formData.get(\"title\"),\n      thumbnailDescription: formData.get(\"thumbnailDescription\"),\n      description: formData.get(\"description\"),\n      category: formData.get(\"category\"),\n      author: formData.get(\"author\"),\n      authorImg: formData.get(\"authorImg\"),\n      image: uploadResponse.secure_url, // Cloudinary Image URL\n    };\n\n    await BlogModel.create(blogData);\n\n    return NextResponse.json({ success: true, msg: \"Blog Added\" });\n  } catch (error) {\n    console.error(error);\n    return NextResponse.json({ success: false, msg: \"Error adding blog\" });\n  }\n}\n\n// Creating API Endpoint to delete Blog\n\nexport async function DELETE(request) {\n  const id = await request.nextUrl.searchParams.get(\"id\");\n  const blog = await BlogModel.findById(id);\n  fs.unlink(`./public${blog.image}`, () => {});\n  await BlogModel.findByIdAndDelete(id);\n  return NextResponse.json({ msg: \"Blog Deleted\" });\n}\n"],"names":[],"mappings":";;;;;;;;;;AAAA;AACA;AACA;;;;AAEA,MAAM,EAAE,YAAY,EAAE;AACtB,MAAM;AAEN,MAAM,SAAS;IACb,MAAM,IAAA,kIAAS;AACjB;AAEA;AAIO,eAAe,IAAI,OAAO;IAC/B,MAAM,SAAS,QAAQ,OAAO,CAAC,YAAY,CAAC,GAAG,CAAC;IAChD,IAAI,QAAQ;QACV,MAAM,OAAO,MAAM,uIAAS,CAAC,QAAQ,CAAC;QACtC,OAAO,aAAa,IAAI,CAAC;IAC3B,OAAO;QACL,MAAM,QAAQ,MAAM,uIAAS,CAAC,IAAI,CAAC,CAAC;QACpC,OAAO,aAAa,IAAI,CAAC;YAAE;QAAM;IACnC;AACF;AAGO,eAAe,QAAQ,GAAG,EAAE,GAAG;IACpC,IAAI,IAAI,MAAM,KAAK,QAAQ;QACzB,IAAI;YACF,MAAM,EAAE,KAAK,EAAE,GAAG,IAAI,IAAI,EAAE,kCAAkC;YAE9D,MAAM,iBAAiB,MAAM,wIAAU,CAAC,QAAQ,CAAC,MAAM,CAAC,OAAO;gBAC7D,QAAQ;YACV;YAEA,IAAI,MAAM,CAAC,KAAK,IAAI,CAAC;gBAAE,KAAK,eAAe,UAAU;YAAC;QACxD,EAAE,OAAO,OAAO;YACd,IAAI,MAAM,CAAC,KAAK,IAAI,CAAC;gBAAE,OAAO,MAAM,OAAO;YAAC;QAC9C;IACF,OAAO;QACL,IAAI,MAAM,CAAC,KAAK,IAAI,CAAC;YAAE,SAAS;QAAqB;IACvD;AACF;AAIO,eAAe,KAAK,OAAO;IAChC,IAAI;QACF,MAAM,WAAW,MAAM,QAAQ,QAAQ;QACvC,MAAM,QAAQ,SAAS,GAAG,CAAC;QAE3B,IAAI,CAAC,OAAO;YACV,OAAO,aAAa,IAAI,CAAC;gBAAE,SAAS;gBAAO,KAAK;YAAoB;QACtE;QAEA,yBAAyB;QACzB,MAAM,cAAc,MAAM,MAAM,WAAW;QAC3C,MAAM,SAAS,OAAO,IAAI,CAAC;QAE3B,6BAA6B;QAC7B,MAAM,iBAAiB,MAAM,wIAAU,CAAC,QAAQ,CAAC,MAAM,CACrD,CAAC,KAAK,EAAE,MAAM,IAAI,CAAC,QAAQ,EAAE,OAAO,QAAQ,CAAC,WAAW,EACxD;YAAE,QAAQ;QAAQ;QAGpB,gCAAgC;QAChC,MAAM,WAAW;YACf,OAAO,SAAS,GAAG,CAAC;YACpB,sBAAsB,SAAS,GAAG,CAAC;YACnC,aAAa,SAAS,GAAG,CAAC;YAC1B,UAAU,SAAS,GAAG,CAAC;YACvB,QAAQ,SAAS,GAAG,CAAC;YACrB,WAAW,SAAS,GAAG,CAAC;YACxB,OAAO,eAAe,UAAU;QAClC;QAEA,MAAM,uIAAS,CAAC,MAAM,CAAC;QAEvB,OAAO,aAAa,IAAI,CAAC;YAAE,SAAS;YAAM,KAAK;QAAa;IAC9D,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC;QACd,OAAO,aAAa,IAAI,CAAC;YAAE,SAAS;YAAO,KAAK;QAAoB;IACtE;AACF;AAIO,eAAe,OAAO,OAAO;IAClC,MAAM,KAAK,MAAM,QAAQ,OAAO,CAAC,YAAY,CAAC,GAAG,CAAC;IAClD,MAAM,OAAO,MAAM,uIAAS,CAAC,QAAQ,CAAC;IACtC,GAAG,MAAM,CAAC,CAAC,QAAQ,EAAE,KAAK,KAAK,EAAE,EAAE,KAAO;IAC1C,MAAM,uIAAS,CAAC,iBAAiB,CAAC;IAClC,OAAO,aAAa,IAAI,CAAC;QAAE,KAAK;IAAe;AACjD","debugId":null}}]
}